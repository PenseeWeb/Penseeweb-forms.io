<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Mindmap Creation Process</title>
    <script src="https://cdn.tailwindcss.com" defer></script>
    <style>
.error-message{color:#dc2626;font-size:.875rem;margin-top:.5rem;display:none}.progress-dots{display:flex;align-items:center;justify-content:center;gap:8px;margin-bottom:2rem}.dot{width:8px;height:8px;border-radius:50%;background:#E5E7EB;position:relative}.dot.active{background:#6366F1;width:10px;height:10px}.dot:not(:last-child)::after{content:'';position:absolute;left:12px;top:50%;width:40px;height:2px;background:#E5E7EB;transform:translateY(-50%)}.promotion-banner{transform:translateY(100%);transition:transform .5s ease}.promotion-banner.show{transform:translateY(0)}.blog-float{position:fixed;bottom:20px;right:20px;animation:float 3s ease-in-out infinite;max-width:300px;z-index:50;transition:transform .2s ease;display:none}.blog-float.active{display:block}.blog-float:hover{transform:translateY(-5px)}@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}.section{display:none}.section.active{display:block}.modal-enter{opacity:0;transform:scale(.9)}.modal-enter-active{opacity:1;transform:scale(1);transition:opacity .3s,transform .3s}.modal-exit{opacity:1;transform:scale(1)}.modal-exit-active{opacity:0;transform:scale(.9);transition:opacity .3s,transform .3s}#page1{background-color:#f8f1fc}#page2{background-color:#e5efff}#page3{background-color:#faeae6}.form-container{background:rgba(255,255,255,.7);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.3);box-shadow:0 8px 32px 0 rgba(31,38,135,.07)}
    </style>
</head>
<body class="min-h-screen">
    <!-- Your existing HTML content remains unchanged -->
    <script>
(() => {
    const cache = {
        form: null,
        inputTypeSelect: null,
        youtubeInput: null,
        textInput: null,
        customText: null,
        charCount: null,
        textError: null,
        youtubeLinkError: null,
        successModal: null,
        gotItButton: null,
        blogFloat: null
    };

    const init = () => {
        cacheDOM();
        bindEvents();
    };

    const cacheDOM = () => {
        cache.form = document.getElementById('contentForm');
        cache.inputTypeSelect = document.getElementById('inputType');
        cache.youtubeInput = document.getElementById('youtubeInput');
        cache.textInput = document.getElementById('textInput');
        cache.customText = document.getElementById('customText');
        cache.charCount = document.getElementById('charCount');
        cache.textError = document.getElementById('textError');
        cache.youtubeLinkError = document.getElementById('youtubeLinkError');
        cache.successModal = document.getElementById('successModal');
        cache.gotItButton = document.getElementById('gotItButton');
        cache.blogFloat = document.getElementById('blogFloat');
    };

    const bindEvents = () => {
        cache.inputTypeSelect.addEventListener('change', handleInputTypeChange);
        cache.customText.addEventListener('input', handleCharCount);
        cache.form.addEventListener('submit', handleFormSubmit);
        document.getElementById('emailForm').addEventListener('submit', handleEmailSubmit);
        cache.gotItButton.addEventListener('click', () => cache.successModal.classList.add('hidden'));
        cache.successModal.addEventListener('click', handleModalClick);
        document.querySelector('.disabled').addEventListener('click', () => 
            alert('Thanks for your interest! Version 3.0 is coming soon to public use.'));
    };

    const handleInputTypeChange = (e) => {
        const isYoutube = e.target.value === 'youtube';
        cache.youtubeInput.style.display = isYoutube ? 'block' : 'none';
        cache.textInput.style.display = isYoutube ? 'none' : 'block';
    };

    const handleCharCount = (e) => {
        const length = e.target.value.length;
        cache.charCount.textContent = length;
        cache.textError.style.display = length > 2000 ? 'block' : 'none';
    };

    const handleFormSubmit = (e) => {
        e.preventDefault();
        const inputType = cache.inputTypeSelect.value;
        const youtubeLink = document.getElementById('youtubeLink').value;
        
        if (!validateForm(inputType, youtubeLink)) return;

        const data = {
            type: inputType,
            content: inputType === 'youtube' ? youtubeLink : cache.customText.value
        };
        localStorage.setItem('mindmapContent', JSON.stringify(data));
        goToPage(2);
    };

    const validateForm = (inputType, youtubeLink) => {
        if (inputType === 'youtube') {
            const isValidYoutube = youtubeLink.includes('youtube.com') || youtubeLink.includes('youtu.be');
            cache.youtubeLinkError.style.display = isValidYoutube ? 'none' : 'block';
            return isValidYoutube;
        }
        return cache.customText.value.length <= 2000;
    };

    const handleEmailSubmit = (e) => {
        e.preventDefault();
        localStorage.setItem('userEmail', document.getElementById('email').value);
        cache.successModal.classList.remove('hidden');
    };

    const handleModalClick = (e) => {
        if (e.target === cache.successModal) {
            cache.successModal.classList.add('hidden');
        }
    };

    window.goToPage = (pageNumber) => {
        document.querySelectorAll('.section').forEach((page, index) => {
            page.classList.toggle('active', index + 1 === pageNumber);
            document.querySelectorAll('.dot')[index].classList.toggle('active', index + 1 === pageNumber);
        });
        cache.blogFloat.classList.toggle('active', pageNumber === 3);
    };

    window.selectVersion = (version) => {
        if (version === 'v2') {
            localStorage.setItem('selectedVersion', 'v2');
            goToPage(3);
        }
    };

    window.closeBlogFloat = () => {
        cache.blogFloat.style.display = 'none';
    };

    document.addEventListener('DOMContentLoaded', init);
})();
    </script>
</body>
</html>
